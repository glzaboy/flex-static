(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a(require("jquery")):a("undefined"!=typeof jQuery?jQuery:window.Zepto)})(function(a){function l(b,c){var f=0;a.each(b,function(a,d){c(a,d,f++)})}function k(b,g){var f=a(".jquerydialog");if(f.length)f.each(function(){var e=a(this),d=e.data("bs.dialog"),h=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);d||e.data("bs.dialog",d=new c(this,h));if("string"==typeof b)d[b](g);else h.show&&
d.show(g)});else return a(m.dialog).each(function(){var e=a(this),d=e.data("bs.dialog"),h=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);d||e.data("bs.dialog",d=new c(this,h));if("string"==typeof b)d[b](g);else h.show&&d.show(g)})}var m={dialog:"<div class='jquerydialog modal' tabindex='-1' role='dialog' style='z-index:10000'><div class='modal-dialog modal-lg text-left'><div class='modal-content'><div class='panel'><div class='panel-heading'><div class=\"panel-control\">\n<button class='btn btn-default' data-panel='fullscreen'><i class='icon-max demo-psi-maximize-3'></i><i class='icon-min demo-psi-minimize-3'></i></button><button class='btn btn-default' data-panel='hide'><i class='demo-psi-cross'></i></button>\n</div><h3 class='panel-title'>Pannel</h3></div><div class='panel-body'></div><div class='modal-footer'></div></div></div></div></div>"},
    c=function(b,g){this.$element=a(b);this.options=a.extend({},c.DEFAULTS,g);console.log(this.options);this.$element.find(".modal-body");var f="",e={onEscape:g.onEscape};l(this.options.buttons,function(a,b){f+="<button data-bb-handler='"+a+"' type='button' class='btn "+b.className+"'>"+b.label+"</button>";e[a]=b.callback});this.options.title&&this.$element.find(".panel-title").html(this.options.title);this.options.url?this.load(this.options.url):this.$element.find(".panel-body").html(this.options.message);
        f.length?this.$element.find(".modal-footer").html(f):this.$element.find(".modal-footer").hide();this.$element.on("click",".modal-footer button",function(b){var c=a(this).data("bb-handler");c=e[c];b.stopPropagation();b.preventDefault();a.isFunction(c)&&!1===c(b)||k("remove")});this.$element.modal(this.options)};c.DEFAULTS={title:"\u63d0\u793a\u6d88\u606f",remote:"",backdrop:!0,keyboard:!0,show:!0};c.prototype.hide=function(){this.$element.modal("hide")};c.prototype.show=function(){this.$element.modal("show")};
    c.prototype.load=function(b){this.$element.find(".panel-body").load(b,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this));this.$element.modal("show")};c.prototype.remove=function(a){this.hide();this.$element.remove()};var n=a.dialog;a.dialog=k;a.dialog.Constructor=c;a.dialog.noConflict=function(){a.dialog=n;return this};a(document).on("nifty.panel.fullscreenChange",".jquerydialog .panel",function(){a(this).hasClass("fullscreen")?a(this).parents(".modal-dialog").removeClass("modal-dialog"):
        a(this).parents(".modal-lg").addClass("modal-dialog")});a(document).on("nifty.panel.hide",".jquerydialog .panel",function(){a(this).hasClass("fullscreen")&&a(this).parents(".modal-lg").addClass("modal-dialog");a.dialog("remove")})});